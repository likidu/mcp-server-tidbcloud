# TiDB Cloud MCP Server Configuration
#
# This server supports two deployment modes:
# 1. Remote (Vercel): Multi-tenant OAuth - each user authenticates with their own TiDB Cloud account
# 2. Local (CLI): Single-tenant - uses API keys or pre-obtained OAuth tokens

# ============================================================
# Environment Configuration
# ============================================================
# Set to "dev" for development/testing or "prod" for production.
# Defaults to "prod" if not specified.
#
# Environment determines which TiDB Cloud endpoints are used:
#   dev:
#     - OAuth: https://dev.tidbcloud.com/oauth/authorize
#     - Token: https://oauth.dev.tidbcloud.com/v1/token
#     - API: https://serverless.dev.tidbapi.com
#   prod:
#     - OAuth: https://tidbcloud.com/oauth/authorize
#     - Token: https://oauth.tidbcloud.com/v1/token
#     - API: https://serverless.tidbapi.com
#
TIDB_CLOUD_ENV=dev

# ============================================================
# OAuth Configuration (Required for Remote Server)
# ============================================================
# Server-side OAuth credentials for the OAuth proxy.
# Users will authenticate via their own TiDB Cloud accounts.
#
TIDB_CLOUD_OAUTH_CLIENT_ID=your-oauth-client-id
TIDB_CLOUD_OAUTH_CLIENT_SECRET=your-oauth-client-secret

# OAuth flow type - must match what's configured in your TiDB Cloud OAuth app.
# TiDB Cloud OAuth currently only supports one flow type per client credentials.
#   auth_code: Authorization Code flow (for web clients like Claude Desktop, Cursor)
#   device_code: Device Code flow (for headless clients like OpenClaw)
# Defaults to "auth_code" if not specified.
#
TIDB_CLOUD_OAUTH_FLOW=auth_code

# ============================================================
# Redis Configuration (Required for Remote Server)
# ============================================================
# Upstash Redis is used to store OAuth state and authorization codes.
# Create a free Redis database at https://upstash.com
# Or use the Vercel Upstash integration: https://vercel.com/integrations/upstash
#
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-redis-token

# ============================================================
# API Key Authentication (For Local Server Only)
# ============================================================
# Get your API keys from TiDB Cloud console: Organization Settings > API Keys
# TIDB_CLOUD_PUBLIC_KEY=your-public-key-here
# TIDB_CLOUD_PRIVATE_KEY=your-private-key-here

# ============================================================
# API Base URL (Optional)
# ============================================================
# Override the default API base URL (determined by TIDB_CLOUD_ENV).
# TIDB_CLOUD_API_URL=https://serverless.tidbapi.com
